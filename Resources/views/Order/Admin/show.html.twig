{% extends "EkynaAdminBundle:Entity:sided.html.twig" %}

{% block title %}
<h1>{{ 'ekyna_order.order.header.show'|trans({'%number%': order.number})|raw }}</h1>
{% endblock %}

{% block actions %}
{{ ui_link(path('ekyna_order_order_admin_list'), 'ekyna_core.button.back_to_list', 'default', 'sm', 'list') }}
{#{ ui_link(path('ekyna_order_order_admin_new'), 'ekyna_order.order.button.new', 'primary', 'sm', 'plus') }#}
{% endblock %}

{% block main %}
<div class="actions">
    {{ ui_link(path('ekyna_order_invoice_download', {'orderId': order.id}), 'ekyna_order.field.invoice_pdf', 'default', 'sm', 'download', false, false, '_blank') }}
    {#{ ui_link(path('ekyna_order_order_admin_edit', {'orderId': order.id}), 'ekyna_core.button.edit', 'warning', 'sm', 'pencil') }}
    {{ ui_link(path('ekyna_order_order_admin_remove', {'orderId': order.id}), 'ekyna_core.button.remove', 'danger', 'sm', 'trash') }#}
</div>
<div class="show show-with-tabs">
    <ul class="nav nav-tabs">
	    <li class="active"><a href="#orde-order-general" data-toggle="tab">{{ 'ekyna_core.field.general'|trans }}</a></li>
	    <li><a href="#orde-order-invoice" data-toggle="tab">{{ 'ekyna_order.field.invoice'|trans }}</a></li>
	</ul>
	<div class="show-body">
	    <div class="tab-content">
		    <div class="tab-pane active" id="orde-order-general">
		        <div class="row">
                    <div class="col-md-6">{{ show_row(order.number, 'text', 'ekyna_core.field.number', {'label_nb_col': 4}) }}</div>
                    <div class="col-md-6">{{ show_row(order.createdAt, 'datetime', 'ekyna_core.field.add_date', {'label_nb_col': 4}) }}</div>
                </div>
		        <div class="row">
                    <div class="col-md-6">{{ show_row(order.atiTotal, 'number', 'ekyna_order.field.ati_total', {'label_nb_col': 4, 'append': 'â‚¬'}) }}</div>
                    <div class="col-md-6">{{ show_row(order.totalWeight, 'number', 'ekyna_order.field.weight_total', {'label_nb_col': 4, 'append': 'g', 'precision': 0}) }}</div>
                </div>
                {{ show_row(order.user, 'entity', 'ekyna_order.field.customer', {'field': 'email', 'route': 'ekyna_user_user_admin_show', 'route_params_map': {'userId': 'id'}}) }}
		        <div class="row">
                    <div class="col-md-6">
                        {% set invoiceAddress = render_address(order.invoiceAddress) %}
                        {{ show_row(invoiceAddress, 'textarea', 'ekyna_order.field.invoice_address', {'label_nb_col': 4}) }}
                    </div>
                    <div class="col-md-6">
                        {% if order.requiresShipment %}
                            {% set deliveryAddress = render_address(order.deliveryAddress) %}
                        {% else %}
                            {% set deliveryAddress = 'ekyna_order.field.no_shipment'|trans %}
                        {% endif %}
                        {{ show_row(deliveryAddress, 'textarea', 'ekyna_order.field.delivery_address', {'label_nb_col': 4}) }}
                    </div>
                </div>
		    </div>
		    <div class="tab-pane" id="orde-order-invoice">
		        <iframe src="{{ path('ekyna_order_invoice_render', {'orderId': order.id}) }}" style="height:500px;"></iframe>
		    </div>
	    </div>
	</div>
</div>
{% endblock %}

{% block side %}
{% endblock %}